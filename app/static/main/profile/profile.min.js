"use strict";$(document).ready(function(){var g=$("meta#change_status_user_device_block_text");var e=$("meta#get_pincode_url");var i=$("meta#renew_sub_url");var q=$("meta#get_order_payment_url");var a=$("meta#delete_user_device_url");var s=$("meta#change_status_user_device");var t,o,k;var f=$("#profile-menu");var p=f.find("li");var l=p.find("a");var d=$("#generate-pin-btn");var b=$(".is_user_has_active_subscribe").length>0;if(!b){d.addClass("disabled");d.attr("disabled",true)}f.append("<li id='magic-line'></li>");var n=$("#magic-line");j(p.first());l.hover(function(){t=$(this);o=t.position().left;k=t.parent().width();n.stop().animate({left:o,width:k})},function(){n.stop().animate({left:n.data("origLeft"),width:n.data("origWidth")})});l.on("click",function(u){j($(this).parent())});function j(u){n.width(u.width()).css("left",u.find("a").position().left).data("origLeft",n.position().left).data("origWidth",n.width())}d.click(function(){if(!b){return false}var w=true;var u=function(x){if(x.hasOwnProperty("success")&&x.success){if(x.hasOwnProperty("data")){$("#pincode-t").text(x.data["pin_code"]);$("#cd_seconds").val(x.data["seconds"]);$.APP.startTimer("cd")}}else{showErrors(x)}};var v=function(x){notyError("System Error")};doAjax(e.data("url"),e.data("method"),{},w,u,v);$("#pincode-modal").modal("show")});$(".renew-sub-btn").click(function(){var x=true;var w={sub_id:$(this).data("sub_id"),order_code:$(this).data("order_code")};var u=function(y){if(y.success){window.location=y.data["redirect_url"]}else{if(y.hasOwnProperty("errors")){showErrors(y)}}};var v=function(y){notyError("System Error")};doAjax(i.data("url"),i.data("method"),JSON.stringify(w),x,u,v)});var c={};$(".payment-wait").each(function(){var u=$(this).data("order_code");c[u]=setInterval(function(){m(u)},5000)});$(".change-status-device-btn").click(function(){var u=$(this).data("uuid");var v=$(this).data("is_active")===true;h(u,!v)});$(".delete-device-btn").click(function(){var u=$(this).data("uuid");r(u)});function m(x){var w=true;var u=function(A){if(A.hasOwnProperty("success")&&A.success){if(A.hasOwnProperty("data")){var C=A.data;if(C.hasOwnProperty("order")){var y=C.order;var z=y.is_success;var B=y.code;var D=y.payment_arrived;if(D===true){clearInterval(c[B]);window.location.reload()}}}}else{showErrors(A)}};var v=function(y){notyError("System Error")};doAjax(q.data("url").replace(-1,x),q.data("method"),{},w,u,v)}function h(x,v){var B=$('.user-device[data-uuid="'+x+'"]');var A=B.find(".change-status-device-btn");var z=true;var y={device_uuid:x,status:v};var u=function(C){if(C.hasOwnProperty("success")&&C.success){var D=B.find(".badge");var E;var F;if(v===true){D.removeClass("badge-warning").addClass("badge-success");F=D.data("active_text");E=A.data("deactivate_text")}else{D.removeClass("badge-success").addClass("badge-warning");F=D.data("inactive_text");E=A.data("activate_text")}A.text(E);D.text(F);A.data("is_active",v);unblockElement(B)}else{showErrors(C)}};var w=function(C){notyError("System Error")};blockElement(g.data("text"),B,function(){doAjax(s.data("url"),s.data("method"),JSON.stringify(y),z,u,w)})}function r(w){var y=true;var x={device_uuid:w};var u=function(z){if(z.hasOwnProperty("success")&&z.success){$('.user-device[data-uuid="'+w+'"]').remove()}else{showErrors(z)}};var v=function(z){notyError("System Error")};doAjax(a.data("url"),a.data("method"),JSON.stringify(x),y,u,v)}});