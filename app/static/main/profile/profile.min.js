"use strict";$(document).ready(function(){var i=$("meta#get_pincode_url");var d=$("meta#renew_sub_url");var e=$("meta#get_order_payment_url");var o,g,h;var b=$("#profile-menu");var l=b.find("li");var n=l.find("a");var j=$("#generate-pin-btn");var k=$(".is_user_has_active_subscribe").length>0;if(!k){j.addClass("disabled");j.attr("disabled",true)}b.append("<li id='magic-line'></li>");var f=$("#magic-line");m(l.first());n.hover(function(){o=$(this);g=o.position().left;h=o.parent().width();f.stop().animate({left:g,width:h})},function(){f.stop().animate({left:f.data("origLeft"),width:f.data("origWidth")})});n.on("click",function(p){m($(this).parent())});function m(p){f.width(p.width()).css("left",p.find("a").position().left).data("origLeft",f.position().left).data("origWidth",f.width())}j.click(function(){if(!k){return false}var r=true;var p=function(s){if(s.hasOwnProperty("success")&&s.success){if(s.hasOwnProperty("data")){$("#pincode-t").text(s.data["pin_code"]);$("#cd_seconds").val(s.data["seconds"]);$.APP.startTimer("cd")}}else{showErrors(s)}};var q=function(s){notyError("System Error")};doAjax(i.data("url"),i.data("method"),{},r,p,q);$("#pincode-modal").modal("show")});$(".renew-sub-btn").click(function(){var s=true;var r={sub_id:$(this).data("sub_id"),order_code:$(this).data("order_code")};var p=function(t){if(t.success){window.location=t.data["redirect_url"]}else{if(t.hasOwnProperty("errors")){showErrors(t)}}};var q=function(t){notyError("System Error")};doAjax(d.data("url"),d.data("method"),JSON.stringify(r),s,p,q)});var c={};$(".payment-wait").each(function(){var p=$(this).data("order_code");c[p]=setInterval(a(p),5000)});function a(s){var r=true;var p=function(v){if(v.hasOwnProperty("success")&&v.success){if(v.hasOwnProperty("data")){var x=v.data;if(v.hasOwnProperty("order")){var t=x.order;var u=t.is_success;var w=t.code;var y=t.payment_arrived;if(y===true){$('.payment-wait[data-order_code="'+w+'"]').remove();if(!k){j.removeClass("disabled");j.attr("disabled",false)}clearInterval(c[w])}}}}else{showErrors(v)}};var q=function(t){notyError("System Error")};doAjax(e.data("url").replace(-1,s),e.data("method"),{},r,p,q)}});