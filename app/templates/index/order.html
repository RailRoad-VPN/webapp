{% extends "partials/layout.html" %}

{% block title %}
    {{ _('Pricing') }}
{% endblock %}

{% block import_css %}
    {% if 'debug' in session %}
        <link rel="stylesheet" href="{{ url_for('static', filename='main/order/order.css') }}">
    {% else %}
        <link rel="stylesheet" href="{{ url_for('static', filename='main/order/order.min.css') }}">
    {% endif %}
{% endblock %}

{% block import_js %}

    {% if 'debug' in session %}
        <script src="{{ url_for('static', filename='assets/jquery/jquery.backstretch.js') }}" type="text/javascript"
                charset="utf-8"></script>
        <script src="{{ url_for('static', filename='main/order/order.js') }}" type="text/javascript"
                charset="utf-8"></script>
    {% else %}
        <script src="{{ url_for('static', filename='assets/jquery/jquery.backstretch.min.js') }}" type="text/javascript"
                charset="utf-8"></script>
        <script src="{{ url_for('static', filename='main/order/order.min.js') }}" type="text/javascript"
                charset="utf-8"></script>
    {% endif %}
{% endblock %}

{% block meta %}
    <meta id="email_check_url" data-method="GET" data-url="{{ url_for('auth.is_email_busy') }}">
    <meta id="get_payment_url_url" data-method="GET" data-url="{{ url_for('order.payment_url') }}">
    <meta id="signup_user_url" data-method="POST" data-url="{{ url_for('auth.signup') }}">
{% endblock %}

{% block body %}
    <div id="order-form-container" class="container content-section" style="padding-top: 50px;">
        <div class="row text-center justify-content-center">
            <div class="form-box">
                <form class="order-form" role="form" action="{{ url_for('auth.signup') }}" method="POST">
                    <h3>{{ _('Order') }}
                        <small>#</small>
                        <small id="order_code">{{ session['order']['code'] }}</small>
                    </h3>
                    <p>{{ _('Build your own railroad in 3 easy steps') }}</p>
                    <div class="order-steps">
                        <div class="order-progress">
                            <div id="progress-bar" class="order-progress-line" data-now-value="16.66"
                                 data-number-of-steps="3"
                                 style="width: 16.66%;"></div>
                        </div>
                        <div id="pack-step" class="order-progress-step active" data-id="pack">
                            <div class="order-progress-step-icon"><i class="fa fa-cube"></i></div>
                            <p>{{ _('pack') }}</p>
                        </div>
                        <div id="account-step" class="order-progress-step" data-id="account">
                            <div class="order-progress-step-icon"><i class="fa fa-user"></i></div>
                            <p>{{ _('account') }}</p>
                        </div>
                        <div id="payment-step" class="order-progress-step" data-id="payment">
                            <div class="order-progress-step-icon"><i class="fa fa-credit-card"></i></div>
                            <p>{{ _('payment') }}</p>
                        </div>
                    </div>

                    <fieldset id="pack-fieldset" data-id="pack">
                        <input id="subscription-id" type="hidden" value="{{ pack_id }}" data-subscription="">
                        <h2 class="text-center text-dark" style="margin-bottom: 100px;">{{ _('CHOOSE YOUR PACK') }}</h2>
                        {% with order=true %}
                            {% include 'partials/pricing-packs.html' %}
                        {% endwith %}
                    </fieldset>

                    <fieldset id="account-fieldset" class="container" data-id="account">
                        <div class="row">
                            <div class="col-lg-4 col-xl-4 col-xxl-4 d-none d-xs-none d-sm-none d-md-none d-lg-block d-xl-block d-xxl-block">
                                {% with chosen_subscription=chosen_subscription, width="width: 18rem;"%}
                                    {% include 'partials/chosen_subscription.html' %}
                                {% endwith %}
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 col-xxl-4 justify-content-center text-center">
                                <h2 class="text-center text-dark"
                                    style="margin-bottom: 100px;">{{ _('CREATE ACCOUNT') }}</h2>
                                <div class="form-group">
                                    <label class="sr-only" for="email">{{ _('Email') }}</label>
                                    <input id="email-input" type="text" name="email" placeholder="{{ _('Email') }}..."
                                           autocomplete="email" class="order-form-email form-control">
                                    <div class="col-12 error small empty_error">
                                        <i class="fa fa-exclamation-triangle"></i>
                                        {{ _('Enter email please') }}
                                    </div>
                                    <div class="col-12 error small busy_error">
                                        <i class="fa fa-exclamation-triangle"></i>
                                        {{ _('Entered email is busy') }}
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="password">{{ _('Password') }}</label>
                                    <input id="password-input" type="password" name="password"
                                           placeholder="{{ _('Password') }}..."
                                           autocomplete="new-password" class="order-form-password form-control">
                                    <div class="col-12 error small empty_error">
                                        <i class="fa fa-exclamation-triangle"></i>
                                        {{ _('Enter password please') }}
                                    </div>
                                    <div class="col-12 error small short_error">
                                        <i class="fa fa-exclamation-triangle"></i>
                                        {{ _('Entered password too short. Minimum length 6 chars') }}
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="repeat-password">{{ _('Verify password') }}</label>
                                    <input id="repeat-password-input" type="password" name="password_repeat"
                                           placeholder="{{ _('Verify password') }}..." autocomplete="new-password"
                                           class="order-form-repeat-password form-control">
                                    <div class="col-12 error small empty_error">
                                        <i class="fa fa-exclamation-triangle"></i>
                                        {{ _('Enter password again to verify it') }}
                                    </div>
                                    <div class="col-12 error small match_error">
                                        <i class="fa fa-exclamation-triangle"></i>
                                        {{ _('Entered passwords does not match') }}
                                    </div>
                                </div>
                                <div class="form-group order-form-buttons text-center">
                                    <button type="button" class="btn btn-link btn-previous">{{ _('BACK') }}</button>
                                    <button type="button" class="btn btn-next">{{ _('Next') }}</button>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 d-none d-xs-block d-sm-block d-md-block d-lg-none d-xl-none d-xxl-none">
                                {% with chosen_subscription=chosen_subscription, width="width: 100%"%}
                                    {% include 'partials/chosen_subscription.html' %}
                                {% endwith %}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset id="payment-fieldset" class="container" data-id="payment">
                        <input id="payment_method" type="hidden">
                        <div class="row">
                            <div class="col-lg-4 col-xl-3 col-xxl-3 d-none d-xs-none d-sm-none d-md-none d-lg-block d-xl-block d-xxl-block">
                                <div class="card">
                                    <h5 class="card-header" style="background-color: rgba(248, 204, 70, 3);">
                                        {{ _('Just last step to...') }}
                                        <p class="card-text" style="font-size: 50%; text-decoration: line-through;">
                                            {{ _('be a king of internet') }}
                                        </p>
                                    </h5>
                                    <div class="card-body">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item">
                                                {{ _('acquire') }}
                                                <span style="color: rgba(248, 204, 70, 3)">
                                                    {{ chosen_subscription['name'] }}
                                                </span>
                                                {% if chosen_subscription['is_best'] == true %}
                                                    <sup>{{ _('best pack') }}</sup>
                                                {% endif %}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('get access to geo-restricted resources') }}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('obtain support at your service') }}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('feel free use public wifi') }}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('build your network') }}
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-xl-9 col-xxl-9 justify-content-center text-center">
                                <div id="payment_methods-container" class="row">
                                    <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                        <div class="payment-method" data-id="1">
                                            <img src="{{ url_for('static', filename='main/order/images/cc.png') }}"
                                                 class="img-fluid">
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                        <div class="payment-method" data-id="14">
                                            <img src="{{ url_for('static', filename='main/order/images/paypal.png') }}"
                                                 class="img-fluid">
                                        </div>
                                    </div>
                                </div>
                                <div id="show_more_payment_methods-text" class="text-center">
                                    <h5>
                                        <button type="button" data-toggle="modal" data-target="#payment_methods-modal"
                                                class="btn btn-link">{{ _('Show more ways to pay') }}</button>
                                    </h5>
                                </div>
                                <div class="order-form-buttons" style="padding-bottom: 50px">
                                    <button type="button" class="btn btn-link btn-previous">{{ _('BACK') }}</button>
                                    <button type="submit" class="btn btn-next">
                                        {{ _('Proceed to payment page') }}
                                    </button>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 d-none d-xs-block d-sm-block d-md-block d-lg-none d-xl-none d-xxl-none">
                                <div class="card">
                                    <h5 class="card-header" style="background-color: rgba(248, 204, 70, 3);">
                                        {{ _('Just last step to...') }}
                                        <p class="card-text" style="font-size: 50%; text-decoration: line-through;">
                                            {{ _('be a king of internet') }}
                                        </p>
                                    </h5>
                                    <div class="card-body">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item">
                                                {{ _('acquire') }}
                                                <span style="color: rgba(248, 204, 70, 3)">
                                                    {{ chosen_subscription['name'] }}
                                                </span>
                                                {% if chosen_subscription['is_best'] == true %}
                                                    <sup>{{ _('best pack') }}</sup>
                                                {% endif %}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('get access to geo-restricted resources') }}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('obtain support at your service') }}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('feel free use public wifi') }}
                                            </li>
                                            <li class="list-group-item">
                                                {{ _('build your network') }}
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                </form>
            </div>
        </div>
    </div>

    <div id="payment_methods-modal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{ _('Choose your favorite payment method') }}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                            <div class="payment-method additional" data-id="36">
                                <img src="{{ url_for('static', filename='main/order/images/other/qiwi.png') }}"
                                     class="img-fluid">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                            <div class="payment-method additional" data-id="70">
                                <img src="{{ url_for('static', filename='main/order/images/other/yandex_money.png') }}"
                                     class="img-fluid">
                            </div>
                        </div>
                        <!-- not russian payment methods -->
                        {% if session['user_locale'] != 'ru' %}
                            <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                <div class="payment-method additional" data-id="70">
                                    <img src="{{ url_for('static', filename='main/order/images/other/mybank.png') }}"
                                         class="img-fluid">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                <div class="payment-method additional" data-id="7">
                                    <img src="{{ url_for('static', filename='main/order/images/other/jcb.png') }}"
                                         class="img-fluid">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                <div class="payment-method additional" data-id="34">
                                    <img src="{{ url_for('static', filename='main/order/images/other/alipay.png') }}"
                                         class="img-fluid">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                <div class="payment-method additional" data-id="16">
                                    <img src="{{ url_for('static', filename='main/order/images/other/ideal.png') }}"
                                         class="img-fluid">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                <div class="payment-method additional" data-id="69">
                                    <img src="{{ url_for('static', filename='main/order/images/other/dragonpay.png') }}"
                                         class="img-fluid">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                                <div class="payment-method additional" data-id="69">
                                    <img src="{{ url_for('static', filename='main/order/images/other/cashu.png') }}"
                                         class="img-fluid">
                                </div>
                            </div>
                        {% endif %}
                        <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-4 px-0 p-4">
                            <div class="payment-method additional text" data-id="0">
                                <h5>{{ _('Other...') }}</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}